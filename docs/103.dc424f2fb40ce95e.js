"use strict";(self.webpackChunkForMore=self.webpackChunkForMore||[]).push([[103],{3103:(b,l,i)=>{i.r(l),i.d(l,{ForgetPasswordComponent:()=>T});var n=i(95),c=i(6814),e=i(4769),d=i(9862);let m=(()=>{class o{constructor(t){this._HttpClient=t,this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}forgot(t){return this._HttpClient.post(this.baseUrl+"auth/forgotPasswords",t)}code(t){return this._HttpClient.post(this.baseUrl+"auth/verifyResetCode",t)}password(t){return this._HttpClient.put(this.baseUrl+"auth/resetPassword",t)}static#e=this.\u0275fac=function(s){return new(s||o)(e.LFG(d.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var p=i(1120);function u(o,a){1&o&&(e.TgZ(0,"p",12),e._uU(1,"email is required"),e.qZA())}function g(o,a){1&o&&(e.TgZ(0,"p",12),e._uU(1,"invalid email"),e.qZA())}function _(o,a){if(1&o&&(e.TgZ(0,"div",10),e.YNc(1,u,2,0,"p",11),e.YNc(2,g,2,0,"p",11),e.qZA()),2&o){const t=e.oxw(2);let s,r;e.xp6(1),e.Q6J("ngIf",null==(s=t.forgotPassword.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.forgotPassword.get("email"))?null:r.getError("email"))}}function f(o,a){if(1&o&&(e.TgZ(0,"div",13)(1,"p",12),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.userMessage)}}function w(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",2)(1,"div",3)(2,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.ForgotPassword())}),e.TgZ(3,"div")(4,"label",5),e._uU(5,"Email"),e.qZA(),e._UZ(6,"input",6),e.qZA(),e.YNc(7,_,3,2,"div",7),e.TgZ(8,"button",8),e._uU(9,"Forgot Password"),e.qZA(),e.YNc(10,f,3,1,"div",9),e.qZA()()()}if(2&o){const t=e.oxw();let s;e.xp6(2),e.Q6J("formGroup",t.forgotPassword),e.xp6(5),e.Q6J("ngIf",(null==(s=t.forgotPassword.get("email"))?null:s.errors)&&(null==(s=t.forgotPassword.get("email"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",""!==t.userMessage)}}function x(o,a){if(1&o&&(e.TgZ(0,"div",13)(1,"p",12),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.userMessage)}}function h(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",2)(1,"div",3)(2,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.ResetCode())}),e.TgZ(3,"div")(4,"label",14),e._uU(5,"Reset code"),e.qZA(),e._UZ(6,"input",15),e.qZA(),e.TgZ(7,"button",8),e._uU(8,"Reset code"),e.qZA(),e.YNc(9,x,3,1,"div",16),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.resetCode),e.xp6(7),e.Q6J("ngIf",""!==t.userMessage)}}function P(o,a){1&o&&(e.TgZ(0,"p"),e._uU(1,"password is required"),e.qZA())}function v(o,a){1&o&&(e.TgZ(0,"p"),e._uU(1,"invalid password"),e.qZA())}function Z(o,a){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,P,2,0,"p",22),e.YNc(2,v,2,0,"p",22),e.qZA()),2&o){const t=e.oxw(2);let s,r;e.xp6(1),e.Q6J("ngIf",null==(s=t.resetPassword.get("password"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.resetPassword.get("password"))?null:r.getError("pattern"))}}function C(o,a){if(1&o&&(e.TgZ(0,"div",13)(1,"p",12),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.userMessage)}}function F(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",2)(1,"div",3)(2,"form",4),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.ResetPassword())}),e.TgZ(3,"div",17)(4,"label",18),e._uU(5,"Reset password"),e.qZA(),e._UZ(6,"input",19),e.qZA(),e.YNc(7,Z,3,2,"div",20),e.TgZ(8,"button",8),e._uU(9,"Reset password"),e.qZA(),e.YNc(10,C,3,1,"div",16),e.qZA()()()}if(2&o){const t=e.oxw();let s;e.xp6(2),e.Q6J("formGroup",t.resetPassword),e.xp6(5),e.Q6J("ngIf",(null==(s=t.resetPassword.get("password"))?null:s.errors)&&(null==(s=t.resetPassword.get("password"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",""!==t.userMessage)}}let T=(()=>{class o{constructor(t,s){this._ForgotService=t,this._Router=s,this.step1=!0,this.step2=!1,this.step3=!1,this.userEmail="",this.userMessage="",this.forgotPassword=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.resetCode=new n.cw({resetCode:new n.NI("")}),this.resetPassword=new n.cw({newPassword:new n.NI("",[n.kI.required,n.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/)])})}ForgotPassword(){const t=this.forgotPassword.value;this._ForgotService.forgot(t).subscribe({next:s=>{console.log(s),this.userEmail=t.email,this.step1=!1,this.step2=!0,this.userMessage=s.message},error:s=>{console.log(s),this.userMessage=s.error.message}})}ResetCode(){this._ForgotService.code(this.resetCode.value).subscribe({next:s=>{console.log(s),this.step1=!1,this.step2=!1,this.step3=!0,this.userMessage=s.status},error:s=>{console.log(s),this.userMessage=s.error.message}})}ResetPassword(){this._ForgotService.password({email:this.userEmail,newPassword:this.resetPassword.value.newPassword}).subscribe({next:r=>{console.log(r),r.token&&(localStorage.setItem("u.token",r.token),this._Router.navigate(["/home"]))},error:r=>{console.log(r),this.userMessage=r.error.message}})}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(m),e.Y36(p.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-forget-password"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","container",4,"ngIf"],["class","container ",4,"ngIf"],[1,"container"],[1,"px-3","py-4","mt-5","bgPer","rounded-2","shadow","w-75","mx-auto"],[3,"formGroup","ngSubmit"],["for","email",1,"form-label","colorPink"],["type","email","name","email","id","email","placeholder","email...","formControlName","email",1,"form-control"],["class","errors alert alert-danger my-2 w-50 py-2 mx-auto text-center",4,"ngIf"],["type","submit",1,"main-btn","my-lg-3","my-md-2"],["class","alert alert-danger my-2 w-50 mx-auto text-center",4,"ngIf"],[1,"errors","alert","alert-danger","my-2","w-50","py-2","mx-auto","text-center"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"alert","alert-danger","my-2","w-50","mx-auto","text-center"],["for","code",1,"form-label","colorPink"],["type","text","name","code","id","code","placeholder","code...","formControlName","resetCode",1,"form-control"],["class","alert alert-danger my-2 w-50  mx-auto text-center",4,"ngIf"],[1,"mb-3"],["for","password",1,"form-label","colorPink"],["type","password","name","password","id","password","placeholder","password...","formControlName","newPassword",1,"form-control"],["class","errors alert alert-danger small my-2",4,"ngIf"],[1,"errors","alert","alert-danger","small","my-2"],[4,"ngIf"]],template:function(s,r){1&s&&(e.YNc(0,w,11,3,"section",0),e.YNc(1,h,10,2,"section",0),e.YNc(2,F,11,3,"section",1)),2&s&&(e.Q6J("ngIf",r.step1),e.xp6(1),e.Q6J("ngIf",r.step2),e.xp6(1),e.Q6J("ngIf",r.step3))},dependencies:[c.ez,c.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return o})()}}]);